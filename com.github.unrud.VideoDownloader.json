{
    "app-id": "com.github.unrud.VideoDownloader",
    "runtime": "org.gnome.Platform",
    "runtime-version": "49",
    "sdk": "org.gnome.Sdk",
    "command": "video-downloader",
    "finish-args": [
        "--share=network",
        "--share=ipc",
        "--socket=fallback-x11",
        "--device=dri",
        "--socket=wayland",
        "--filesystem=xdg-download/VideoDownloader:create"
    ],
    "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/man",
        "/share/doc",
        "/share/gtk-doc",
        "/share/man",
        "/share/pkgconfig",
        "*.la",
        "*.a"
    ],
    "modules": [
        {
            "name": "pyxattr",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/iustin/pyxattr/archive/refs/tags/v0.8.1.tar.gz",
                    "sha256": "ce7ef783e751b96610a6eb32fc49a89340b5dc575fbe15054ce7935ebaf49edb",
                    "x-checker-data": {
                        "type": "json",
                        "url": "https://api.github.com/repos/iustin/pyxattr/releases/latest",
                        "version-query": ".tag_name",
                        "url-query": "\"https://github.com/iustin/pyxattr/archive/refs/tags/\" + $version + \".tar.gz\""
                    }
                }
            ]
        },
        {
            "name": "mutagen",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/quodlibet/mutagen/archive/refs/tags/release-1.47.0.tar.gz",
                    "sha256": "f7489e19d375c31ba1962ab19e11eca8b9f86f05bfd99cef467f8dd875d8941e",
                    "x-checker-data": {
                        "type": "json",
                        "url": "https://api.github.com/repos/quodlibet/mutagen/releases/latest",
                        "version-query": ".tag_name",
                        "url-query": "\"https://github.com/quodlibet/mutagen/archive/refs/tags/\" + $version + \".tar.gz\""
                    }
                }
            ]
        },
        {
            "name": "pycryptodomex",
            "buildsystem": "simple",
            "build-commands": [
                "touch .separate_namespace",
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/Legrandin/pycryptodome/archive/refs/tags/v3.23.0.tar.gz",
                    "sha256": "5a905f0f4237b79aefee47f3e04568db2ecb70c55dd7cb118974c5260aa9e285",
                    "x-checker-data": {
                        "type": "json",
                        "url": "https://api.github.com/repos/Legrandin/pycryptodome/tags",
                        "version-query": "[.[].name | select(test(\"^v?[0-9.]+$\"))] | sort_by(sub(\"^v\"; \"\") | split(\".\") | map(tonumber))[-1]",
                        "url-query": "\"https://github.com/Legrandin/pycryptodome/archive/refs/tags/\" + $version + \".tar.gz\""
                    }
                }
            ]
        },
        {
            "name": "websockets",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/aaugustin/websockets/archive/refs/tags/16.0.tar.gz",
                    "sha256": "c720700d313af5d1c61372da62d78c5b6192ed09871367df65a8e1087b60b1f0",
                    "x-checker-data": {
                        "type": "json",
                        "url": "https://api.github.com/repos/aaugustin/websockets/tags",
                        "version-query": "[.[].name | select(test(\"^v?[0-9.]+$\"))] | sort_by(sub(\"^v\"; \"\") | split(\".\") | map(tonumber))[-1]",
                        "url-query": "\"https://github.com/aaugustin/websockets/archive/refs/tags/\" + $version + \".tar.gz\""
                    }
                }
            ]
        },
        {
            "name": "brotli",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/google/brotli/archive/refs/tags/v1.2.0.tar.gz",
                    "sha256": "816c96e8e8f193b40151dad7e8ff37b1221d019dbcb9c35cd3fadbfe6477dfec",
                    "x-checker-data": {
                        "type": "json",
                        "url": "https://api.github.com/repos/google/brotli/releases/latest",
                        "version-query": ".tag_name",
                        "url-query": "\"https://github.com/google/brotli/archive/refs/tags/\" + $version + \".tar.gz\""
                    }
                }
            ]
        },
        {
            "name": "deno",
            "buildsystem": "simple",
            "build-commands": [
                "install -Dt /app/bin deno"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/denoland/deno/releases/download/v2.7.1/deno-x86_64-unknown-linux-gnu.zip",
                    "sha256": "b7154ae42839d7b1453422e2f33c907e5c68fde8fe9f145cd43b8dd083671a6f",
                    "x-checker-data": {
                        "type": "json",
                        "url": "https://api.github.com/repos/denoland/deno/releases/latest",
                        "version-query": ".tag_name",
                        "url-query": ".assets[] | select(.name == \"deno-x86_64-unknown-linux-gnu.zip\").browser_download_url"
                    },
                    "only-arches": [
                        "x86_64"
                    ]
                },
                {
                    "type": "archive",
                    "url": "https://github.com/denoland/deno/releases/download/v2.7.1/deno-aarch64-unknown-linux-gnu.zip",
                    "sha256": "bfe62e582faceb9885748f00a9f44cd5af458b9d08d7ac8275c4048ff1bb1540",
                    "x-checker-data": {
                        "type": "json",
                        "url": "https://api.github.com/repos/denoland/deno/releases/latest",
                        "version-query": ".tag_name",
                        "url-query": ".assets[] | select(.name == \"deno-aarch64-unknown-linux-gnu.zip\").browser_download_url"
                    },
                    "only-arches": [
                        "aarch64"
                    ]
                }
            ]
        },
        {
            "name": "yt-dlp-ejs",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app \"$(echo *.whl)\""
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/7e/5b/1283356b70d4893a8a050cee15092e1b08ea15310b94365f88067146721b/yt_dlp_ejs-0.5.0-py3-none-any.whl",
                    "sha256": "674fc0efea741d3100cdf3f0f9e123150715ee41edf47ea7a62fbdeda204bdec",
                    "x-checker-data": {
                        "type": "pypi",
                        "name": "yt-dlp-ejs",
                        "packagetype": "bdist_wheel"
                    }
                }
            ]
        },
        {
            "name": "yt-dlp",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-dependencies --prefix=/app \"$(echo *.whl)[default]\""
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/5a/40/664c99ee36d80d84ce7a96cd98aebcb3d16c19e6c3ad3461d2cf5424040e/yt_dlp-2026.2.21-py3-none-any.whl",
                    "sha256": "0d8408f5b6d20487f5caeb946dfd04f9bcd2f1a3a125b744a0a982b590e449f7",
                    "x-checker-data": {
                        "type": "pypi",
                        "name": "yt-dlp",
                        "packagetype": "bdist_wheel"
                    }
                }
            ]
        },
        {
            "name": "video-downloader",
            "builddir": true,
            "buildsystem": "meson",
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/Unrud/video-downloader",
                    "tag": "v0.12.30",
                    "commit": "340787a65c03db56a5de71c2342895dee2d51a88",
                    "x-checker-data": {
                        "type": "json",
                        "url": "https://api.github.com/repos/Unrud/video-downloader/releases/latest",
                        "tag-query": ".tag_name"
                    }
                }
            ]
        }
    ]
}
